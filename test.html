<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Supabase Lessons Test</title>
</head>
<body>
  <h1>Supabase Lessons Test</h1>

  <button id="tlingitBtn">Tlingit</button>
  <button id="haidaBtn">Haida</button>
  <button id="tsimshianBtn">Tsimshian</button>

  <div id="lessonsContainer"></div>

  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

    // Supabase URL and anon key
    const supabaseUrl = 'https://tjodmaqwodkpyusohljj.supabase.co';
    const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRqb2RtYXF3b2RrcHl1c29obGpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyOTM5OTIsImV4cCI6MjA3NTg2OTk5Mn0.tgE1IxOusOFtq2ELRMFPgsJrAcmFyNs13UbkDDjXzUI';

    const supabase = createClient(supabaseUrl, supabaseAnonKey);

    async function fetchLessons(language) {
      const { data, error } = await supabase
        .from('lessons')
        .select('*')
        .eq('language', language)
        .order('level', { ascending: true });

      const container = document.getElementById('lessonsContainer');
      container.innerHTML = ''; // clear previous lessons

      if (error) {
        container.textContent = 'Error fetching lessons: ' + JSON.stringify(error);
        console.error(error);
        return;
      }

      if (!data || data.length === 0) {
        container.textContent = 'No lessons found for ' + language;
        return;
      }

      // Display lessons
      data.forEach(lesson => {
        const lessonDiv = document.createElement('div');
        lessonDiv.style.marginBottom = '20px';
        lessonDiv.innerHTML = `<h3>${lesson.title} (Level ${lesson.level})</h3>
                               <p>${lesson.text}</p>`;
        container.appendChild(lessonDiv);
      });
    }

    document.getElementById('tlingitBtn').addEventListener('click', () => fetchLessons('tlingit'));
    document.getElementById('haidaBtn').addEventListener('click', () => fetchLessons('haida'));
    document.getElementById('tsimshianBtn').addEventListener('click', () => fetchLessons('tsimshian'));
  </script>
</body>
</html>
